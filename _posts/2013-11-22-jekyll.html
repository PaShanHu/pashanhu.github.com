---
layout: post-default
title: 安装jekyll及初步使用
postDate: 2013-11-22
---
<header class='header'>
	<h1 class='title'>{{ page.title }}</h1>
</header>
<section class='post-info'>
	<div class='tags'>
		<span>jekyll</span>
		<span>ruby</span>
	</div>
	<div class='time'><span>{{ page.postDate }}</span></div>
</section>
<section class='content'>
	<h4 class='title'>前言</h4>
	<div class='part'>
		<p>到今天共写了两篇博客，一篇helloworld上传了两次才成功；一篇markdown初学笔记用markdown写的，github编译总有错误。</p>
	</div>
	<div class='part'>
		<p>想了一下还是要装ruby及jekyll，实现本地预览。毕竟github的错误反馈有点坑，效率也低，还是本地编译预览方便一点。</p>
	</div>
	<h4 class='title'>jekyll安装</h4>
	<div class='part'>
		<p>首先感谢<a href="http://www.cnblogs.com/purediy/archive/2013/03/07/2948892.html"><b class='name'>purediy</b></a>和<a href="http://yanping.me/cn/blog/2012/03/18/github-pages-step-by-step/"><b class='name'>雁起平沙</b></a>，整个ruby及jekyll安装都是按照两者博客指导进行，博客步骤清晰，解说也到位。</p>
	</div>
	<div class='part'>
		<p>Ruby下载地址：<a href="http://rubyforge.org/frs/download.php/75465/rubyinstaller-1.9.3-p0.exe">rubyinstaller（for windows）</a></p>
		<p>Devkit下载地址：<a href="https://github.com/oneclick/rubyinstaller/downloads/">devkit（for windows）</a></p>
	</div>
	<div class='part'>
		<p>详细步骤可看<b class='name'>purediy</b>与<b class='name'>雁起平沙</b>的教程，在此仅记录安装中的一些问题。</p>
		<ol>
			<li>是否需要为gem换sources？<b class='name'>雁起平沙</b>推荐换淘宝镜像，实际操作中不换速度也很快。</li>
			<li>
				<code class='code'>gem install jekyll</code>出错。
				<div>
					<span>错误代码：</span><code class='code block'>ERROR:  Error installing jekyll:<br/>ERROR: Failed to build gem native extension.</code>
				</div>
				<div>
					两篇博客均未给出相关信息，只能google。<span>感谢<a href="https://github.com/mojombo/jekyll/issues/1393"><b class='name'>mojombo</b></a>，此君在linux下安装jekyll同样错误，最后卸载ruby重装解决错误。</span>果断试一下，windows下重装ruby，问题解决！
				</div>
			</li>
		</ol>
	</div>
	<h4 class='title'>jekyll使用</h4>
	<div class='part'>
		<div class='part'>
			<p>本片博文就用到了jekyll。首先讲一讲命令。</p>
			<p>所有命令参见<a href="http://jekyllrb.com/docs/">官方文档</a></p>
		</div>
		<div class='part'>
		<h6 class='subtitle'>讲一讲重要的jekyll serve</h6>
			<ul>
				<li>在项目目录执行该命令即启动服务；默认生成到_site文件夹下。</li>
				<li>添加选项-w/--watch(jekyll serve -w)，即开启文件检测，文件变动时自动重载。jekyll-1.3下.yaml设置auto：true已经失效。</li>
			</ul>
		</div>

		<div class='part'>
			<h6 class='subtitle'>使用中的错误及解决</h6>
			<ol>
				<li>已经存在的项目怎么本地编译并开启内置服务器？
					<div>在项目所在文件夹，执行<code class='code'>jekyll serve</code></div>
					<div>服务器开启，<code class='code inline'>http://localhost:4000/</code></div>
					<div>执行<code class='code'>jekyll serve --watch</code>，监视文件变化，自动编译、重启服务器。</div>
				</li>
				<li>
					windows下编码错误（<code class='code inline'>invalid byte sequence in GBK</code>）怎么办？
					<div>参阅：<a href="http://www.cnblogs.com/aleda/articles/Jekyll-in-Windows-following-Chinese-encoding-problem-solutions.html">Jekyll在Windows下面中文编码问题解决方案</a></div>
					<div>jekyll-1.3中，把<code class='code block'>self.content = File.read_with_options(File.join(base, name),<br/> #merged_file_read_opts(opts))</code>改为<code class='code block'>self.content = File.read(File.join(base, name),:encoding=>"utf-8")</code></div>
				</li>
				<li>
					<span><code class='code inline'>jekyll serve --watch</code>错误</span>
					<div>google后发现都基本没说清。感谢<a href="http://stackoverflow.com/questions/16232960/guard-wont-load-wdm/16245129#16245129">stackoverflow的<b>Josh Infiesto</b></a>，虽然不是按他的方法做的，但他的解答使我意识到可能没有安装wdm模块，<code class='code inline'>gem install wdm</code>，问题解决。</div>
				</li>
			</ol>
		</div>
	</div>
</section>
<footer>
	<div class='foot-control'>
		<span class='font-icon icon-left'></span>
		<span class='font-icon icon-right'></span>
	</div>
</footer>